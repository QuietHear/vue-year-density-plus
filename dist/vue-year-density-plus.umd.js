(function(e,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("vue")):typeof define=="function"&&define.amd?define(["vue"],y):(e=typeof globalThis<"u"?globalThis:e||self,e.vueYearDensityPlus=y(e.Vue))})(this,function(e){"use strict";const y="",Y={class:"vue-year-density-plus"},C={class:"top-content"},L={class:"left-box"},J={class:"right-box"},O={class:"row else"},A=["onMouseenter","onClick"],z={class:"bottom-des"},G={class:"tips"},I={class:"default-tip"},P={class:"all-lv"},j=e.createStaticVNode('<div class="item default first"></div><div class="item default lv-1"></div><div class="item default lv-2"></div><div class="item default lv-3"></div><div class="item default lv-4"></div>',5),q=[{__name:"index",props:{i18n:{type:Boolean,default:!1},firstDay:{type:Number,default:7,validator(l,g){return l>=1&&l<=7}},showTime:{type:String,default:null},data:{type:Object,default:()=>({})}},emits:["getData","dayClick"],setup(l,{emit:g}){const B=g,D=l,R=s=>s%4===0?s%100===0?s%400===0:!0:!1,w=(s,a)=>{switch(a){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 2:return R(s)?29:28;case 4:case 6:case 9:case 11:return 30}},c=e.ref([]),N=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],W=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],X=["January","February","March","April","May","June","July","August","September","October","November","December"],h=e.ref([]),Z=["一","二","三","四","五","六","日"],_=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],p=e.ref(!1),V=()=>{const s=D.showTime||new Date().toGMTString();h.value=[],c.value=[];for(let t=0;t<7;t++){const o=D.firstDay-1+t;h.value.push({cn:Z[o>6?o%7:o],en:_[o>6?o%7:o],list:[]})}let a=null,i=null,n=null,r=null,d=null,m=null;if(s&&s.indexOf("-")===-1&&s.indexOf("GMT")===-1)p.value=!0,a=parseInt(s),n=0,d=1,B("getData",`${a}-01-01`,`${a}-12-31`);else{p.value=!1;const t=new Date(s);i=t.getFullYear(),r=t.getMonth(),m=t.getDate();const o=new Date(t.getTime()+24*60*60*1e3);a=o.getFullYear()-1,n=o.getMonth(),d=o.getDate()}let k=new Date(a+"-"+(n+1)+"-"+d).getDay();k=k===0?7:k;const M=k-D.firstDay,S=M<0?7+M:M;let u=0;if(S>0)if(p.value){c.value.push(n);for(let t=0;t<S;t++,u++)h.value[u].list.push({day:0})}else{const t=new Date(new Date(a+"-"+(n+1)+"-"+d).getTime()-S*24*60*60*1e3);a=t.getFullYear(),n=t.getMonth(),d=t.getDate()}const x=t=>{u===0?c.value.push(n):c.value[c.value.length-1]!==n&&(c.value[c.value.length-1]=n),h.value[u].list.push({year:a,month:n+1,day:t+1,dayEn:t+1+(t+1===1||t+1===21||t+1===31?"st":t+1===2||t+1===22?"nd":t+1===3||t+1===23?"rd":"th"),formatDay:`${a}-${n+1<10?"0":""}${n+1}-${t+1<10?"0":""}${t+1}`}),u++,u===7&&(u=0)};if(p.value)for(let t=0;t<12;t++,n++){n>11&&(n=0,a+=1);for(let o=0;o<w(a,n+1);o++)x(o)}else{B("getData",`${a}-${n+1<10?"0":""}${n+1}-${d<10?"0":""}${d}`,`${i}-${r+1<10?"0":""}${r+1}-${m<10?"0":""}${m}`);for(let t=0;a!==i||n<r+1;t++,n++){n>11&&(n=0,a+=1);for(let o=t===0?d-1:0;o<(a===i&&n===r?m:w(a,n+1));o++)x(o)}}let F=0;c.value.forEach((t,o)=>{o>0&&(t===c.value[F]?c.value[o]=null:F=o)})};V(),e.watch(()=>D.showTime,()=>{V()});const E=e.ref(!1),f=e.ref({}),b=e.ref(0),T=e.ref(0),H=(s,a)=>{if(a.month){const i=s.target.getBoundingClientRect();b.value=i.x,T.value=i.y,f.value={...a},E.value=!0}},K=s=>{E.value=!1,f.value={}};return(s,a)=>(e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",C,[e.createElementVNode("div",L,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(h),(i,n)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([n%2===0?"hide":""]),key:n},e.toDisplayString(l.i18n?i.en:i.cn),3))),128))]),e.createElementVNode("div",J,[e.createElementVNode("div",O,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(i,n)=>(e.openBlock(),e.createElementBlock("div",{class:"month-item",key:n},e.toDisplayString(l.i18n?W[i]:N[i]),1))),128))]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(h),(i,n)=>(e.openBlock(),e.createElementBlock("div",{class:"row",key:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.list,(r,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",r.month?"default":"",l.data[r.formatDay]>6?"lv-4":l.data[r.formatDay]>4?"lv-3":l.data[r.formatDay]>2?"lv-2":l.data[r.formatDay]>0?"lv-1":""]),onMouseenter:m=>H(m,r),onMouseleave:K,key:d,onClick:m=>B("dayClick",r)},null,42,A))),128))]))),128))])]),e.createElementVNode("div",z,[e.createElementVNode("div",G,[e.renderSlot(s.$slots,"tip",{},()=>[e.createElementVNode("p",I,e.toDisplayString(l.i18n?"Default tip":"默认Tip"),1)])]),e.createElementVNode("div",P,[e.createTextVNode(e.toDisplayString(l.i18n?"Less":"少"),1),j,e.createTextVNode(e.toDisplayString(l.i18n?"More":"多"),1)])]),e.unref(E)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"more-msg",style:e.normalizeStyle({left:e.unref(b)+5+"px",top:e.unref(T)-3+"px"})},[e.renderSlot(s.$slots,"default",{date:e.unref(f)},()=>[e.createTextVNode(e.toDisplayString(l.data[e.unref(f).formatDay]>0?l.data[e.unref(f).formatDay]+(l.i18n?"":"次"):l.i18n?"No":"无")+" "+e.toDisplayString(l.i18n?"contributions":"贡献")+" "+e.toDisplayString(l.i18n?"on":"在")+" "+e.toDisplayString(l.i18n?X[e.unref(f).month-1]:N[e.unref(f).month-1])+" "+e.toDisplayString(l.i18n?e.unref(f).dayEn+".":e.unref(f).day+"号。"),1)])],4)):e.createCommentVNode("",!0)]))}}],$={install(l){q.forEach(g=>{l.component("vueYearDensityPlus",g)})}};return typeof window<"u"&&window.Vue&&window.Vue.use($),$});
